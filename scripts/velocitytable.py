#!/usr/bin/env python

import numpy as np
import matplotlib.pyplot as plt

def fast_sigmoid(x):
    return (x / (1 + abs(x)))


def line(x0, y0, x1, y1):
    m = (y1 - y0) / (x1 - x0)
    c = -m * x0 + y0
    return m, c


def fast_yvel(y):
    if y <= 20:
        return -60
    if y <= 30:
        return 5.5 * y - 170
    if y <= 40:
        return 1.0 * y - 35
    if y <= 50:
        return 5.5 * y - 215.0
    return 60


def fast_xvel(x):
    if x < 0:
        return -40
    if x <= 20:
        return 1.0 * x - 40.0
    if x <= 50:
        return 0.5 * x - 30.0
    if x <= 80:
        return 1/3 * x - (21 + 2/3)
    if x <= 110:
        return 0.5 * x - 35.0
    if x <= 130:
        return 1.0 * x - 90.0
    return 40



# {{{
xVTable = np.array([-36,-3.487507e+01,-3.376800e+01,-3.267878e+01,-3.160742e+01,-3.055391e+01,-2.951826e+01,-2.850047e+01,-2.750053e+01,-2.651845e+01,-2.555422e+01,-2.460785e+01,-2.367934e+01,-2.276868e+01,-2.187588e+01,-2.100093e+01,-2.014384e+01,-1.930461e+01,-1.848323e+01,-1.767971e+01,-1.689404e+01,-1.612623e+01,-1.537628e+01,-1.464418e+01,-1.392994e+01,-1.323355e+01,-1.255503e+01,-1.189435e+01,-1.125153e+01,-1.062657e+01,-1.001947e+01,-9.430219e+00,-8.858826e+00,-8.305289e+00,-7.769608e+00,-7.251783e+00,-6.751814e+00,-6.269701e+00,-5.805444e+00,-5.359043e+00,-4.930498e+00,-4.519809e+00,-4.126976e+00,-3.752000e+00,-3.394879e+00,-3.055614e+00,-2.734205e+00,-2.430653e+00,-2.144956e+00,-1.877116e+00,-1.627131e+00,-1.395003e+00,-1.180730e+00,-9.843140e-01,-8.057536e-01,-6.450493e-01,-5.022010e-01,-3.772088e-01,-2.700725e-01,-1.807924e-01,-1.093682e-01,-5.580011e-02,-2.008804e-02,-2.232004e-03,2.232004e-03,2.008804e-02,5.580011e-02,1.093682e-01,1.807924e-01,2.700725e-01,3.772088e-01,5.022010e-01,6.450493e-01,8.057536e-01,9.843140e-01,1.180730e+00,1.395003e+00,1.627131e+00,1.877116e+00,2.144956e+00,2.430653e+00,2.734205e+00,3.055614e+00,3.394879e+00,3.752000e+00,4.126976e+00,4.519809e+00,4.930498e+00,5.359043e+00,5.805444e+00,6.269701e+00,6.751814e+00,7.251783e+00,7.769608e+00,8.305289e+00,8.858826e+00,9.430219e+00,1.001947e+01,1.062657e+01,1.125153e+01,1.189435e+01,1.255503e+01,1.323355e+01,1.392994e+01,1.464418e+01,1.537628e+01,1.612623e+01,1.689404e+01,1.767971e+01,1.848323e+01,1.930461e+01,2.014384e+01,2.100093e+01,2.187588e+01,2.276868e+01,2.367934e+01,2.460785e+01,2.555422e+01,2.651845e+01,2.750053e+01,2.850047e+01,2.951826e+01,3.055391e+01,3.160742e+01,3.267878e+01,3.376800e+01,3.487507e+01,36])
yVTable = np.array([-60,-5.999936e+01,-5.999825e+01,-5.999627e+01,-5.999274e+01,-5.998653e+01,-5.997585e+01,-5.995786e+01,-5.992818e+01,-5.988026e+01,-5.980458e+01,-5.968761e+01,-5.951076e+01,-5.924921e+01,-5.887091e+01,-5.833593e+01,-5.759639e+01,-5.659731e+01,-5.527879e+01,-5.357953e+01,-5.144203e+01,-4.881920e+01,-4.568205e+01,-4.202773e+01,-3.788705e+01,-3.333013e+01,-2.846923e+01,-2.345761e+01,-1.848373e+01,-1.376093e+01,-9.512860e+00,-5.956276e+00,-3.282706e+00,-1.641353e+00,-8.206765e-01,1.210878e+00,6.583317e+00,1.509574e+01,2.521450e+01,3.512668e+01,4.350328e+01,4.977979e+01,5.403293e+01,5.668319e+01,5.822562e+01,5.907669e+01,5.952828e+01,5.976163e+01,5.988026e+01,5.994002e+01,5.996999e+01,5.998499e+01,5.999249e+01,5.999625e+01,5.999812e+01,5.999906e+01,5.999953e+01,5.999977e+01,5.999988e+01,5.999994e+01,5.999997e+01,5.999999e+01,5.999999e+01,6.000000e+01,6.000000e+01,6.000000e+01,6.000000e+01,6.000000e+01,6.000000e+01,6.000000e+01,6.000000e+01,6.000000e+01,6.000000e+01,6.000000e+01,6.000000e+01,6.000000e+01,6.000000e+01,6.000000e+01,6.000000e+01,6.000000e+01,6.000000e+01,6.000000e+01,6.000000e+01,6.000000e+01,6.000000e+01,6.000000e+01,6.000000e+01,6.000000e+01,6.000000e+01,6.000000e+01,6.000000e+01,6.000000e+01,6.000000e+01,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60])
# }}}

X = np.linspace(0, 127, 128, endpoint=True)
Yfast = np.zeros(len(X))
Xfast = np.zeros(len(X))
for i in range(len(X)):
    Yfast[i] = fast_yvel(X[i])
for i in range(len(X)):
    Xfast[i] = fast_xvel(X[i])

plt.figure()

plt.plot(Xfast, color='green')
plt.plot(xVTable, color='blue')

plt.plot(Yfast, color='red')
plt.plot(yVTable, color='orange')

# plt.plot(X, Y, color='red')

plt.show()

